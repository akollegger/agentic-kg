# Hand-Coded Examples

This directory contains hand-coded examples that demonstrate how to use the Agentic Knowledge Graph (AKG) framework.

## Movie Knowledge Graph Example

The `movie_kg_construction.py` file illustrates a declarative approach to knowledge graph construction using the AKG framework. This example shows how to:

1. Define a knowledge graph structure using a declarative specification (`GraphPlan`)
2. Execute that specification to construct an actual graph in Neo4j

### Key Concepts

#### Declarative Graph Specification

The example demonstrates how to create a declarative specification for a knowledge graph using the `GraphPlan` class:

```python
graph_plan = GraphPlan(
    name="Movie Knowledge Graph",
    description="A knowledge graph for movies and their relationships"
)
```

This specification includes:

- **Entities**: Define node types in the graph (Movie, Actor, Director)
- **Relations**: Define relationship types between entities (ACTED_IN)
- **Property Keys**: Define what properties each entity and relation can have
- **Construction Rules**: Define how to populate the graph from data sources

#### Construction Rules

The power of this approach is in the construction rules, which declaratively specify:

1. What data source to use (CSV files in this example)
2. How to map that data to the graph structure
3. What tool to use for the construction (load_csv_nodes, load_csv_relationships)

For example:

```python
movie.add_rule(Rule.construction(
    name="LoadMovies",
    description="Construction of the movie entity",
    tool="load_csv_nodes",
    args={
        "file_name": "movies.csv",
        "node_label": "Movie",
        "node_id_field": "movieId"
    }
))
```

#### Graph Construction

The `graph_constructor.py` module contains the logic to execute the declarative specification:

```python
result = construct_graph(graph_plan)
```

This function:
1. Iterates through all entities and relations in the graph plan
2. Executes their construction rules using the appropriate tools
3. Returns the results of the construction process

### Benefits of This Approach

1. **Separation of Concerns**: The graph structure (what) is separated from the construction logic (how)
2. **Reusability**: The same construction tools can be used for different graph structures
3. **Maintainability**: The graph structure can be modified without changing the construction logic
4. **Extensibility**: New construction tools can be added to the TOOL_MAP without changing existing code
5. **Declarative**: The focus is on describing what the graph should look like, not the imperative steps to create it

Most importantly, a graph plan can be generated by an Agent, reviewed by a human, and then used to construct a graph.

### Usage

Run the example with:

```bash
python -m agentic_kg.hand_coded.movie_kg_construction
```

This will create a movie knowledge graph in your Neo4j database with movies, actors, and their relationships.
